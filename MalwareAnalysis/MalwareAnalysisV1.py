## UNFINISHED PROJECT
import os
import time
import magic
import psutil

FILE_PATH = r"C:\Users\%USERNAME%\Desktop\WhatAmI.exe"

def get_creation_time(setpath):
    creation_timestamp = os.path.getctime(setpath)
    readable_creation = time.ctime(creation_timestamp)
    return readable_creation

def get_modified_time(setpath):
    modification_timestamp = os.path.getmtime(setpath)
    readable_modified = time.ctime(modification_timestamp)
    return readable_modified

def get_file_size(setpath):
    getsize = os.path.getsize(setpath) / (1024)
    return getsize

def get_sha256(path):
    import hashlib
    sha = hashlib.sha256()
    with open(path, "rb") as f:
        for chunk in iter(lambda: f.read(4096), b""):
            sha.update(chunk)
    return sha.hexdigest()

def get_magicbytes(setpath):
    try:
        file_type = magic.from_file(setpath)
    except Exception:
        return "ERROR: Unknown file type"
    return file_type

def get_pid(setpath):
    pid = next((p.pid for p in psutil.process_iter(['pid', 'exe']) if p.info['exe'] == setpath), None)
    return pid

def get_connections_by_pid(pid):
    conns = psutil.net_connections(kind='tcp')
    return [c for c in conns if c.pid == pid and c.raddr]

def printConnections():
    for c in get_connections_by_pid(get_pid(FILE_PATH)):
        print(f"{c.pid} | {c.laddr.ip}:{c.laddr.port} -> {c.raddr.ip}:{c.raddr.port} | {c.status}")

printConnections()
print(get_file_size(FILE_PATH))

